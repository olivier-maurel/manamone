<script> 'use strict';
    // *
    // * EVENTS : _events.js.html.twig
    // *

    // Add a new item.
    $(document.body).on('click', '.add-item', function(){addItem($(this))});

    // Remove an item.
    $(document.body).on('click', '.delete-item', function(){deleteItem($(this))});

    // Edit an item.
    $(document.body).on('click', '.edit-item', function(){formItem($(this))});

    // Edit a virtual row.
    $(document.body).on('submit', '#form_item', function(e){editItem($(this),e)});

    /**
     * CATEGORY
     */
    // Add a new category.
    $(document.body).on('click', '.new-category', function(){
        let template = $(this).attr('data-template');
        $.post("{{ path('app_category_new') }}",{
            envelope: $(this).attr('data-envelope'),
            category_template: template
        }, function(data){
                if (data['success'] === true) {
                    $('div[data-template='+template+']').last().append(data['content']);
                }
            }
        );
    });
</script>